<div class="row">
    <div class="col span-11">
        <h3 *ngIf="!editingCollection">New Collection</h3>
        <h3 *ngIf="editingCollection">Edit Collection</h3>

        <div class="new-collection">
            <form [ngFormModel]="newCollectionForm" (submit)="onSubmit(newCollectionForm.value)" id="newCollectionForm">
                <label for="collectionTitle">Collection name</label>
                <input [ngFormControl]="collectionTitle" id="collectionTitle" class="form-control" type="text">

                <label for="collectionDescription">Collection description</label>
                <textarea [ngFormControl]="collectionDescription" id="collectionDescription" class="form-control" type="text"></textarea>

                <label for="searchterm">Add Resources to collection</label>
                <input name="searchterm" autocomplete="off" [ngFormControl]="searchterm" id="searchterm" #input [(ngModel)]="query" class="input--search" placeholder="Start typing to search" type="text">
                <div class="suggestions" *ngIf="searchResults.length > 0">
                    <ul>
                        <li *ngFor="let item of searchResults">
                            <a (click)="select(item)" [ngClass]="{'selected' : resourceInCollection(item.id)}">
                                <img class="suggestions__image" src="{{item.image}}" *ngIf="item.image">
                                <div *ngIf="!item.image"  class="suggestions__type-icon {{itemTypeClass(item)}}"></div>
                                <div class="suggestions-text">
                                    <span class="suggestions-text__title">{{shortTitle(item.title)}}</span>
                                    <span class="suggestions-text__desc">{{shortDescription(item.description)}}</span>
                                    <span *ngIf="item.overview"> - {{item.overview}}</span>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>

                <h4>Resources in collection:</h4>
                <ul *ngIf="resourceIds.length > 0">
                    <li *ngFor="let resource of resourceIds">{{resource}}</li>
                </ul>

                <br><br>

                <div class="submitbut">
                    <button [disabled]="busy" class="btn btn--3d btn--primary btn--large" type="submit" *ngIf="!editingCollection">Create collection</button>
                    <button [disabled]="busy" class="btn btn--3d btn--primary btn--large" (click)="updateCollection($event)" *ngIf="editingCollection">Update collection</button>
                    <button [disabled]="busy" class="btn btn--3d btn--primary btn--large" (click)="cancelUpdate($event)" *ngIf="editingCollection">Cancel</button>
                </div>
            </form>
        </div>

        <br>

        <div>
            <h3>Existing Collections</h3>
            <p *ngIf="usersCollections.length == 0">No existing collections</p>
            <ul *ngIf="usersCollections.length > 0">
                <li *ngFor="let collection of usersCollections">

                    <p>{{ collection.title }}</p>
                    <button (click)="editCollection(collection)">Edit</button>
                    <button (click)="deleteCollection(collection)">Delete</button>
                </li>
            </ul>
        </div>
    </div>
</div>
